# Daily Boarding Manager

A comprehensive expense and fund management application with Bengali language support, built with React, TypeScript, Tailwind CSS, and Lovable Cloud (Supabase backend).

## üåü Features

- **Authentication**: Secure login/signup with email verification
- **Dashboard**: Real-time balance tracking with monthly summaries
- **Expense Management**: Add, edit, delete expenses with receipt uploads
- **Fund Management**: Track income sources and deposits
- **Reports**: Daily, monthly, and custom range reports with charts
- **Export Options**: PDF and CSV export functionality
- **Offline Caching**: Last report cached for offline viewing
- **Settings**: Manage categories, units, and favorite items
- **Responsive Design**: Mobile-first UI with Bengali text support

## üìã Project Info

**URL**: https://lovable.dev/projects/5d439028-f817-4f53-91a3-36a8c76c6657

## üöÄ Quick Start

### Prerequisites

- Node.js (v18 or higher) - [Install with nvm](https://github.com/nvm-sh/nvm#installing-and-updating)
- npm or yarn package manager
- Git

### Local Development Setup

```bash
# 1. Clone the repository
git clone <YOUR_GIT_URL>
cd daily-boarding-manager

# 2. Install dependencies
npm install

# 3. Environment setup
# The .env file is auto-generated by Lovable Cloud
# No manual configuration needed!

# 4. Start development server
npm run dev

# Application will be available at http://localhost:8080
```

## üé® Development

### Using Lovable (Recommended)

Simply visit the [Lovable Project](https://lovable.dev/projects/5d439028-f817-4f53-91a3-36a8c76c6657) and start prompting. Changes are automatically committed to this repo.

### Using Your IDE

Clone this repo and push changes. All changes will be reflected in Lovable automatically.

### Using GitHub Codespaces

1. Navigate to the repository
2. Click "Code" ‚Üí "Codespaces" ‚Üí "New codespace"
3. Edit and commit directly in the cloud IDE

## üß™ Testing

### End-to-End Tests with Playwright

```bash
# Install Playwright browsers (first time only)
npx playwright install

# Run all tests
npm run test:e2e

# Run tests in UI mode (recommended for development)
npx playwright test --ui

# Run specific test file
npx playwright test e2e/auth.spec.ts

# Run tests in headed mode (see browser)
npx playwright test --headed

# Generate test report
npx playwright show-report
```

### Test Coverage

The project includes E2E tests for:
- ‚úÖ Authentication flows (login, signup, forgot password)
- ‚úÖ Dashboard functionality
- ‚úÖ Expense management (CRUD operations)
- ‚úÖ Fund management
- ‚úÖ Report generation (daily, monthly, custom range)
- ‚úÖ Settings management (categories, units, favorites)
- ‚úÖ Navigation and routing

### Writing New Tests

Tests are located in the `e2e/` directory. Example test structure:

```typescript
import { test, expect } from '@playwright/test';

test.describe('Feature Name', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/your-route');
  });

  test('should do something', async ({ page }) => {
    // Your test code
    await expect(page.locator('text=Something')).toBeVisible();
  });
});
```

## üèóÔ∏è Technology Stack

### Frontend
- **React 18** - UI library
- **TypeScript** - Type safety
- **Vite** - Build tool and dev server
- **Tailwind CSS** - Utility-first CSS framework
- **Shadcn UI** - Component library
- **React Query** - Server state management
- **React Router** - Client-side routing
- **Recharts** - Data visualization
- **jsPDF** - PDF generation
- **Lucide React** - Icon library

### Backend (Lovable Cloud)
- **Supabase** - Backend as a Service
  - PostgreSQL database
  - Authentication system
  - Row Level Security (RLS)
  - Edge Functions (serverless)
  - Storage for receipts

### Testing
- **Playwright** - E2E testing framework

## üì¶ Project Structure

```
daily-boarding-manager/
‚îú‚îÄ‚îÄ e2e/                          # E2E tests
‚îÇ   ‚îú‚îÄ‚îÄ auth.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ expense.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ reports.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ settings.spec.ts
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/               # Reusable components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                   # Shadcn UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NavLink.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtectedRoute.tsx
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                    # Custom React hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts
‚îÇ   ‚îú‚îÄ‚îÄ integrations/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase/            # Auto-generated Supabase client
‚îÇ   ‚îú‚îÄ‚îÄ pages/                   # Page components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddExpense.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddFund.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Auth.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Reports.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Settings.tsx
‚îÇ   ‚îú‚îÄ‚îÄ lib/                     # Utilities
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.css                # Global styles & design tokens
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îú‚îÄ‚îÄ functions/               # Edge Functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backup-database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports-daily/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reports-monthly/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reports-custom/
‚îÇ   ‚îî‚îÄ‚îÄ config.toml             # Supabase configuration
‚îú‚îÄ‚îÄ playwright.config.ts         # Playwright configuration
‚îú‚îÄ‚îÄ tailwind.config.ts          # Tailwind configuration
‚îú‚îÄ‚îÄ vite.config.ts              # Vite configuration
‚îî‚îÄ‚îÄ package.json

```

## üöÄ Deployment

### Deploy on Lovable (Recommended)

1. Open [Lovable Project](https://lovable.dev/projects/5d439028-f817-4f53-91a3-36a8c76c6657)
2. Click **Share** ‚Üí **Publish**
3. Your app is now live with automatic HTTPS!

### Custom Domain Setup

1. Navigate to **Project > Settings > Domains**
2. Click **Connect Domain**
3. Follow the DNS configuration instructions
4. [Read more about custom domains](https://docs.lovable.dev/features/custom-domain)

### Environment Variables

The `.env` file is automatically managed by Lovable Cloud. You don't need to configure anything manually!

**Auto-configured variables:**
```env
VITE_SUPABASE_URL=<auto-configured>
VITE_SUPABASE_PUBLISHABLE_KEY=<auto-configured>
VITE_SUPABASE_PROJECT_ID=<auto-configured>
```

### Edge Functions Deployment

Edge functions are automatically deployed when you push changes. No manual deployment needed!

**Available endpoints:**
- `/reports-daily` - Generate daily expense report
- `/reports-monthly` - Generate monthly summary
- `/reports-custom` - Custom date range reports
- `/backup-database` - Database backup for current user

## üíæ Database Backup

### Automatic Backup via Edge Function

The project includes a backup edge function that exports all user data.

**Trigger backup manually:**
```bash
# Make authenticated request to backup endpoint
curl -X POST https://your-project-url/functions/v1/backup-database \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**Backup includes:**
- All expenses
- All funds
- Categories and units
- Favorites
- Settings

The backup is returned as a JSON file with timestamp.

### Scheduled Backups

To schedule automatic backups:

1. Open your Lovable Cloud backend
2. Use a cron service (like [cron-job.org](https://cron-job.org)) to call the backup endpoint
3. Set schedule (recommended: daily at midnight)
4. Store backup files securely (Google Drive, Dropbox, etc.)

### Restore from Backup

1. Open the backup JSON file
2. Navigate to Lovable Cloud backend
3. Use the SQL editor to restore data:

```sql
-- Example: Restore expenses
INSERT INTO expenses (id, user_id, expense_date, item_name_bn, total_price, ...)
VALUES (...);
```

## üîí Security

### Authentication
- Email/password authentication via Supabase
- Auto-confirm email signups enabled (for testing)
- Protected routes with session management
- Automatic token refresh

### Row Level Security (RLS)
All database tables have RLS policies ensuring:
- Users can only access their own data
- No cross-user data leakage
- Server-side enforcement

### Best Practices
- Environment variables are never committed
- API keys are server-side only
- All routes are protected by authentication
- Input validation on forms
- Secure file uploads to Supabase Storage

## üêõ Troubleshooting

### Common Issues

**Build Errors**
```bash
# Clear cache and reinstall
rm -rf node_modules package-lock.json
npm install
```

**Authentication Issues**
- Check if email confirmation is enabled in Lovable Cloud settings
- Verify redirect URLs in authentication settings
- Clear browser localStorage and try again

**Database Connection Issues**
- Verify .env file exists (auto-generated by Lovable)
- Check Lovable Cloud backend status
- Review RLS policies for your tables

**E2E Test Failures**
```bash
# Update Playwright browsers
npx playwright install --force

# Run in debug mode
npx playwright test --debug

# Clear test artifacts
rm -rf test-results playwright-report
```

### Getting Help

- üìö [Lovable Documentation](https://docs.lovable.dev)
- üí¨ [Lovable Community](https://lovable.dev/community)
- üêõ [Report Issues](https://github.com/your-repo/issues)

## üìù Development Guidelines

### Code Style
- Use TypeScript for type safety
- Follow React best practices
- Use semantic HTML elements
- Implement proper error handling
- Add loading states for async operations

### Design System
- Use Tailwind CSS design tokens from `index.css`
- Follow mobile-first responsive design
- Maintain Bengali text throughout
- Use HSL colors for theme consistency
- Leverage Shadcn UI components

### Database Changes
- Always use migrations for schema changes
- Test RLS policies thoroughly
- Document foreign key relationships
- Use proper data types and constraints

### Adding New Features

1. **Plan** - Review existing code and database schema
2. **Design** - Create component structure
3. **Implement** - Write code with proper types
4. **Test** - Add E2E tests for new flows
5. **Document** - Update README if needed
6. **Deploy** - Push changes (auto-deploys)

## üìä Performance

- **First Load**: < 2s
- **Lighthouse Score**: 90+
- **Bundle Size**: Optimized with code splitting
- **Caching**: Service worker + localStorage
- **Images**: Lazy loaded

## üåç Browser Support

- Chrome/Edge (last 2 versions)
- Firefox (last 2 versions)
- Safari (last 2 versions)
- Mobile browsers (iOS Safari, Chrome Mobile)

## üìÑ License

This project is private and proprietary.

## üë• Contributing

This is a private project. For feature requests or bug reports, please contact the project owner.

## üôè Acknowledgments

- Built with [Lovable](https://lovable.dev)
- UI components from [Shadcn UI](https://ui.shadcn.com)
- Icons from [Lucide](https://lucide.dev)
- Backend powered by [Supabase](https://supabase.com)

---

**Made with ‚ù§Ô∏è by Daily Boarding Manager Team**
